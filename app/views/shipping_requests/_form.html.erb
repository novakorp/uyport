  
<%= form_for @shipping_request do |s| %>
 <% if @shipping_request.errors.any? %>
  <div id="error_explanation">
    <h2><%= pluralize(@shipping_request.errors.count, "error") %> impiden guardar el formulario:</h2>
    <ul>
    <% @shipping_request.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
    <% end %>
    </ul>
  </div>
  <% end %>
  
  <table class="tabla_campos" cellpadding=0 cellspacing=0>
  
  <tr>
    <th> Fecha del Pedido:</th>
    <td> <%= s.date_select :request_date %>   </td>
  </tr>
    
  <tr>
    <th> Fecha del Viaje:</th>
    <td> <%= s.date_select :required_shipment_date %>   </td> 
  </tr>

  
  <tr>
    <th> Servicio:</th>
    <td> <%= s.collection_select :service_id, Service.all, :id, :description %>  
  </td>
  </tr>
  
  <tr>
    <th> Recorrido:</th>
    <td> <%= s.collection_select :trip_id, Trip.all, :id, :description %>   </td>
  </tr>
  
  
  <tr>
  <th> Cliente:</th>
  <td> <%= text_field_tag(:customer_select) %> 
		<%= hidden_field_tag(:customer_id) %> 
  </td>
  </tr>  
  
  <tr>
    <th> Cuenta Cliente:</th>
    <td> <%= s.select :account_id, [] %>  
  </td>
  </tr>
  
  
  <tr>
    <th>Viaje Unico:</th>
    <td> <%= s.select :simple_shipment, [['Si', 1], ['No', 0]] %>  </td>
  </tr>
  
  
  <tr>
  <th> Número de Factura:</th>
    <td> <%= s.text_field :bill_number %> </td>
  </tr>

  <tr>
    <th> Observaciones:</th>
    <td> <%= s.text_area :details %></td>
  </tr>
  
  <tr><td colspan=2 class="acciones_form">
  <%= s.submit "Guardar" %>
  </td>
  </tr>
  </table>

  
<% end %>


<script>
  
  $(function() {    
    $("#customer_select" ).autocomplete({
	  minLength: 0,
      source: "/customers/customers_ac.js",
	  focus: function( event, ui ) {
        $( "#customer_select" ).val( ui.item.label );
        return false;
      },
	  select: function( event, ui ) {
          if (ui.item) {		  
			$("#customer_select").val (ui.item.label);
			$("#customer_id").val (ui.item.value);		  
			set_select_options ("/accounts/accounts_by_customer_id.js", ui.item.value, "shipping_request_account_id");
		  };
			return false;
      } 
    });
  });
  
  // Carga opciones en el campo con id select_field_id , obtenidos de una url de opciones y un parametro
  function set_select_options (url_action, param_id, select_field_id) {
	$.post(url_action, {id: param_id, element_id: select_field_id}, null , "script");  
  }
   
 
</script>
	
	