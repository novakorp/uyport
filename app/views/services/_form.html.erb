  
<%= form_for @service do |s| %>
 <% if @service.errors.any? %>
  <div id="error_explanation">
    <h2><%= pluralize(@service.errors.count, "error") %> impiden guardar el formulario:</h2>
    <ul>
    <% @service.errors.full_messages.each do |msg| %>
      <li><%= msg %></li>
    <% end %>
    </ul>
  </div>
  <% end %>
  
  <table class="tabla_campos" cellpadding=0 cellspacing=0>
  
  <tr>
  <th>Empresa:</th>
  <td> <%= s.collection_select :company_id, Company.all,  :id, :company_name %> </td>
  </tr>
  
  <tr>
  <th>Descripción:</th>
  <td> <%= s.text_field :description %> </td>
  </tr>
    
  <tr>
    <th> Unidad de Facturación: </th>
    <td> <%= s.collection_select :billing_unit_id, BillingUnit.all, :id, :description %> </td>
  </tr>
  
  <tr>
    <th> Tipo de Vehículo: </th>
    <td> <%= s.collection_select :vehicle_type_id, VehicleType.where("coupling_support = 0"), :id, :description %> </td>
  </tr>
  
  <tr>
    <th> Requiere Acoplado: </th>
    <td> <%= s.select :couple_required, [['Sí', 1], ['No', 0]]  %> </td>
  </tr>
  
  <tr>
    <th> Tipo de Acoplado: </th>
    <td> <%= s.collection_select :couple_type_id, VehicleType.all, :id, :description %> </td>
  </tr>
  
  <tr><td colspan=2 class="acciones_form">
  <%= s.submit "Guardar" %>
  </td>
  </tr>
  </table>
  
  <script> 
	// Asignar al combo de seleccion de tipo de vehiculo el evento on change invocando la siguiente funcion.
    // Se pasa la ruta del servicio que devuelve las opciones y el elemento en el que se deben cargar.
	$("#service_vehicle_type_id").subSelectWithAjax("/vehicle_types/couplable_types_by_id", "service_couple_type_id");
	
	// Invocar incialmente para cargar valores al comienzo
	$("#service_vehicle_type_id").change();
  </script>

 
<% end %>


